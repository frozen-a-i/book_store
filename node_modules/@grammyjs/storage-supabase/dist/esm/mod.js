export function supabaseAdapter({ supabase, table }) {
    if (!supabase) {
        throw new Error('Kindly pass an instance of supabase client to the parameter list.');
    }
    if (!table) {
        throw new Error('Kindly pass a table to the parameter list.');
    }
    return {
        read: async (id) => {
            const { data, error } = await supabase.from(table).select('session').eq('id', id).single();
            if (error || !data) {
                return undefined;
            }
            return JSON.parse(data.session);
        },
        write: async (id, value) => {
            const input = { id, session: JSON.stringify(value) };
            await supabase.from(table).upsert(input, { returning: 'minimal' });
        },
        delete: async (id) => {
            await supabase.from(table).delete({ returning: 'minimal' }).match({ id });
        },
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxNQUFNLFVBQVUsZUFBZSxDQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBK0M7SUFDakcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2QsTUFBTSxJQUFJLEtBQUssQ0FBQyxtRUFBbUUsQ0FBQyxDQUFDO0lBQ3ZGLENBQUM7SUFFRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDWCxNQUFNLElBQUksS0FBSyxDQUFDLDRDQUE0QyxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVELE9BQU87UUFDTCxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQVUsRUFBRSxFQUFFO1lBQ3pCLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsTUFBTSxRQUFRLENBQUMsSUFBSSxDQUFVLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBRXBHLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ25CLE9BQU8sU0FBUyxDQUFDO1lBQ25CLENBQUM7WUFFRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBTSxDQUFDO1FBQ3ZDLENBQUM7UUFDRCxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQVUsRUFBRSxLQUFRLEVBQUUsRUFBRTtZQUNwQyxNQUFNLEtBQUssR0FBRyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBRXJELE1BQU0sUUFBUSxDQUFDLElBQUksQ0FBVSxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7UUFDOUUsQ0FBQztRQUNELE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBVSxFQUFFLEVBQUU7WUFDM0IsTUFBTSxRQUFRLENBQUMsSUFBSSxDQUFVLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDckYsQ0FBQztLQUNGLENBQUM7QUFDSixDQUFDIn0=